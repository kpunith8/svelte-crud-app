{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "..\\src\\pages\\Home.svelte"
  ],
  "sourcesContent": [
    "<script>\r\n  import { onMount } from \"svelte\";\r\n  import axios from \"axios\";\r\n  import PostForm from \"../components/PostForm.svelte\";\r\n\r\n  const baseURL = \"https://ndb99xkpdk.execute-api.eu-west-2.amazonaws.com/dev\";\r\n\r\n  let posts = [];\r\n  let postLimit = 5;\r\n  let editingPost = {\r\n    body: \"\",\r\n    title: \"\",\r\n    id: null\r\n  };\r\n\r\n  onMount(async () => {\r\n    const res = await axios.get(`${baseURL}/posts/${postLimit}`);\r\n    posts = await res.data;\r\n  });\r\n\r\n  function editPost(post) {\r\n    console.log(\"Post to edit:\", post);\r\n    editingPost = post;\r\n  }\r\n\r\n  async function deletePost(id) {\r\n    let deleteRequest = await axios.delete(`${baseURL}/post/id`, id);\r\n    let res = await deleteRequest.data;\r\n    if (res) {\r\n      posts = posts.filter(p => p.id !== id);\r\n    }\r\n  }\r\n\r\n  function addPost({ detail: post }) {\r\n    if (posts.find(p => p.id === post.id)) {\r\n      const index = posts.findIndex(p => p.id === post.id);\r\n      let postsUpdated = posts;\r\n      postsUpdated.splice(index, 1, post);\r\n\r\n      posts = postsUpdated;\r\n    } else {\r\n      posts = [post, ...posts];\r\n    }\r\n\r\n    editingPost = {\r\n      body: \"\",\r\n      title: \"\",\r\n      id: null\r\n    };\r\n  }\r\n\r\n  async function setLimit() {\r\n    const res = await axios.get(`${baseURL}/posts/${postLimit}`);\r\n    const data = await res.data;\r\n    posts = data;\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .btn-delete {\r\n    color: red !important;\r\n  }\r\n\r\n  .card-title {\r\n    margin-bottom: 0;\r\n  }\r\n  .timestamp {\r\n    color: #999;\r\n    margin-bottom: 10px;\r\n  }\r\n</style>\r\n\r\n<div class=\"row\">\r\n  <div class=\"col s6\">\r\n    <PostForm on:postCreated={addPost} {editingPost} />\r\n  </div>\r\n\r\n  <div class=\"col s3\" style=\"margin:35px\">\r\n    <p>Limit number of posts</p>\r\n    <input type=\"number\" bind:value={postLimit} />\r\n    <button on:click={setLimit} class=\"waves-effect waves-light btn\">\r\n      Set\r\n    </button>\r\n  </div>\r\n</div>\r\n<div class=\"row\">\r\n  {#if posts.length === 0}\r\n    <div class=\"preloader-wrapper big active\">\r\n    <div class=\"spinner-layer spinner-blue-only\">\r\n      <div class=\"circle-clipper left\">\r\n        <div class=\"circle\" />\r\n      </div>\r\n      <div class=\"gap-patch\">\r\n        <div class=\"circle\" />\r\n      </div>\r\n      <div class=\"circle-clipper right\">\r\n        <div class=\"circle\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n  {:else}\r\n    {#each posts as post}\r\n      <div class=\"col s6\">\r\n        <div class=\"card\">\r\n          <div class=\"card-content\">\r\n            <p class=\"card-title\">{post.title}</p>\r\n            <p class=\"timestamp\">{post.createdAt}</p>\r\n            <p>{post.body}</p>\r\n          </div>\r\n          <div class=\"card-action\">\r\n            <a href=\"#\" on:click={() => editPost(post)}>Edit</a>\r\n            <a href=\"#\" on:click={() => deletePost(post.id)} class=\"btn-delete\">\r\n              Delete\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    {/each}\r\n  {/if}\r\n</div>\r\n"
  ],
  "names": [],
  "mappings": "AA2DE,WAAW,cAAC,CAAC,AACX,KAAK,CAAE,GAAG,CAAC,UAAU,AACvB,CAAC,AAED,WAAW,cAAC,CAAC,AACX,aAAa,CAAE,CAAC,AAClB,CAAC,AACD,UAAU,cAAC,CAAC,AACV,KAAK,CAAE,IAAI,CACX,aAAa,CAAE,IAAI,AACrB,CAAC"
}